<div class="layout">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="logo">
      <svg class="logo" width="110" height="110" viewBox="0 0 64 64" fill="none"
       xmlns="http://www.w3.org/2000/svg">
    <rect width="64" height="64" rx="12" fill="#E8F5E9"/>
    <path d="M10 38H54V30L46 20H34V38" stroke="#2E7D32" stroke-width="3"
          stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <circle cx="20" cy="44" r="6" stroke="#2E7D32" stroke-width="3"/>
    <circle cx="44" cy="44" r="6" stroke="#2E7D32" stroke-width="3"/>
    <path d="M34 20V12H26V20" stroke="#2E7D32" stroke-width="3"
          stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M26 26H34" stroke="#2E7D32" stroke-width="3"
          stroke-linecap="round"/>
  </svg>
      <div class="brand">
        <h1>Movilidad Urbana</h1>
      </div>
    </div>

    <nav class="menu">
      <a class="item" (click)="gotoVehiculos()">
        Vehiculos
      </a>

      <a class="item active">
        Rutas y Mapa
      </a>
      <a class="item" (click)="logout()">
        Cerrar Sesion
      </a>
    </nav>

  </aside>

  <!-- Contenido Principal -->
  <main class="content">
    <h2>Rutas y Mapa</h2>

    <div class="content-wrapper">

      <!-- MAPA -->
  <div id="container-mapa" #containerMapa>
    <div id="map" #mapEl></div>
  </div>

      <!-- PANEL DERECHO -->
      <div class="panel">

        <!-- Crear Trazo -->
        <div class="card">
          <h3>Crear Trazo</h3>

          <label class="floating">
            <input type="text" placeholder=" " [(ngModel)]="newRutaName">
            <span>Nombre del trazo</span>
          </label>

          <div class="color-picker-row"> <label>Color:</label> <input type="color" [(ngModel)]="newRutaColor" /> </div>

          <button class="btn primary" (click)="saveDrawnRuta()">Guardar Trazo</button>
          <button class="btn secondary">Cancelar</button>
        </div>

        <!-- Rutas existentes -->
<div class="card">
  <h3>Rutas Existentes</h3>

  <div class="select-wrapper">
    <div class="select-modern" (click)="toggleRutaList()">
      <span>{{ selectedRutaLabel || "Seleccionar ruta" }}</span>
      <span class="arrow">▾</span>
    </div>

    <ul class="dropdown" *ngIf="rutaListOpen">
      <li *ngFor="let ruta of rutas" (click)="selectRuta(ruta)">
        <span class="dot" [style.background]="ruta.color_hex"></span>
        <span>{{ ruta.nombre_ruta }}</span>
      </li>
    </ul>
  </div>
</div>

<!-- Calles -->
<div class="card">
  <h3>Calles / Segmentos</h3>

  <div class="select-wrapper">
    <div class="select-modern" (click)="toggleCalleList()">
      <span>{{ selectedCalleLabel || "Seleccionar calle" }}</span>
      <span class="arrow">▾</span>
    </div>

    <ul class="dropdown" *ngIf="calleListOpen">
      <li *ngFor="let calle of calles" (click)="selectCalle(calle)">
        <span>{{ calle.nombre }}</span>
        <span class="sub">{{ calle.id }}</span>
      </li>
    </ul>
  </div>
</div>
</div>
    </div>
  </main>
</div>
